-- Add verification fields to user_profiles table
ALTER TABLE user_profiles
ADD COLUMN IF NOT EXISTS tier1_verified BOOLEAN DEFAULT FALSE,
ADD COLUMN IF NOT EXISTS tier2_verified BOOLEAN DEFAULT FALSE,
ADD COLUMN IF NOT EXISTS tier3_verified BOOLEAN DEFAULT FALSE,
ADD COLUMN IF NOT EXISTS tier1_submitted_at TIMESTAMP WITH TIME ZONE,
ADD COLUMN IF NOT EXISTS tier2_submitted_at TIMESTAMP WITH TIME ZONE,
ADD COLUMN IF NOT EXISTS tier3_submitted_at TIMESTAMP WITH TIME ZONE,
ADD COLUMN IF NOT EXISTS tier1_verified_at TIMESTAMP WITH TIME ZONE,
ADD COLUMN IF NOT EXISTS tier2_verified_at TIMESTAMP WITH TIME ZONE,
ADD COLUMN IF NOT EXISTS tier3_verified_at TIMESTAMP WITH TIME ZONE,
ADD COLUMN IF NOT EXISTS tier1_reference_id TEXT,
ADD COLUMN IF NOT EXISTS tier2_reference_id TEXT,
ADD COLUMN IF NOT EXISTS tier3_reference_id TEXT,
ADD COLUMN IF NOT EXISTS tier1_data JSONB,
ADD COLUMN IF NOT EXISTS tier2_data JSONB,
ADD COLUMN IF NOT EXISTS tier3_data JSONB,
ADD COLUMN IF NOT EXISTS verification_limits JSONB DEFAULT '{"tier1": {"daily": 1000, "monthly": 20000}, "tier2": {"daily": 5000, "monthly": 100000}, "tier3": {"daily": 10000, "monthly": 500000}}'::jsonb,
ADD COLUMN IF NOT EXISTS dojah_customer_id TEXT,
ADD COLUMN IF NOT EXISTS last_verification_attempt TIMESTAMP WITH TIME ZONE; 